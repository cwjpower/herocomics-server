server {
  listen 80;
  server_name _;
  root /var/www/html;
  index index.php index.html;

  # /admin → /var/www/html/web/admin (alias) + PHP 보정
  location ^~ /admin/ {
    alias /var/www/html/web/admin/;
    index index.php index.html;
    try_files $uri $uri/ /admin/index.php?$args;
  }
  location ~ ^/admin/.*\.php$ {
    include        fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME $request_filename;  # alias 핵심
    fastcgi_pass   php:9000;
  }

  # 나머지 경로
  location / {
    try_files $uri $uri/ /index.php?$args;
  }
  location ~ \.php$ {
    include        fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_pass   php:9000;
  }
}
