# === Variant B (admin/public/index.php) - FIXED ===
location /admin/ {
    alias /var/www/html/admin/public/;
    index index.php index.html;
    try_files $uri $uri/ /index.php?$args;
}

# 캡쳐 사용해 SCRIPT_FILENAME 정확히 지정
location ~ ^/admin/(.+\.php)$ {
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /var/www/html/admin/public/$1;
    fastcgi_param PATH_INFO "";
    fastcgi_pass php:9000;
}

# _health.php 는 admin 루트에 둘 수도 있으니 예외 처리(있으면 편함)
location = /admin/_health.php {
    root /var/www/html;  # => /var/www/html/admin/_health.php
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_pass php:9000;
}
